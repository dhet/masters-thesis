\chapter{Related Work}\label{chapter:related-work}
Cloud computing in the context of automotive allows for the realization of disruptive innovations which have great potential to improve driver satisfaction and to open up new fields of business for car manufacturers. For instance, \citeauthor*{wollaeger2012cloud} propose a framework which allows for the computation of an optimal velocity profile for vehicles in an effort to minimize fuel consumption \cite{wollaeger2012cloud}. Their solution benefits greatly from the vast amounts of computing resources available to clouds as it relies on dynamic programming which is characterized by high resource demands. Furthermore, large amounts of data are accessible in the cloud which may be used to make better-informed decisions, \eg\ on the basis of crowd-sourced data pools.

While some approaches exist which explore possible use cases of automotive clouds, very little work can be found that addresses the \emph{architectural} challenges of creating cloud-supported systems specifically for the automotive domain.
Thus, much of the work related to this thesis is concerned with other, more researched domains, such as IoT and fog computing. First and foremost, the thoroughly executed and exhaustive survey on fog computing \cite{nath2018survey} by \citeauthor*{nath2018survey} shall be mentioned as highly relevant and recommended reading. In their literature study, the authors present and summarize work pertaining to a variety of subjects related to IoT and embedded computing.
An important and much-discussed aspect in this domain is the \emph{management} of the of widely dispersed collections of embedded computing nodes that make up pervasive IoT systems. Similar to the system proposed in this thesis, many approaches exist that attempt to master the complexity inherent to these systems by means of service-oriented computing. Notable examples of service-oriented architecture frameworks tailored specifically to the IoT and CPS are the SOCRADES project \cite{cannata2008socrades}, the IMC-AESOP project \cite{karnouskos2012soa} and the ARUM project~\cite{marin2013conceptual}.
Further noteworthy approaches are presented in \cite{butzin2016microservices}, \cite{kart2007distributed}, and~\cite{teixeira2011service}. 
A common denominator among these works is the idea to represent heterogeneous physical resources and processes as software objects that can be managed and controlled programmatically and may interact with each other by means of machine-to-machine interfaces.
Of particular interest for this thesis are furthermore service-oriented approaches specifically tailored to \emph{automotive} systems. Contributions in this domain are provided, \eg , by \citeauthor*{kugele2017service}. In their paper \cite{kugele2017service}, the authors present the results of an interview study investigating the needs of automotive software architects and conclude that SOA-based approaches to E/E-system modeling bring promising benefits to the automotive development process. A concrete example of how service oriented modeling can have great benefits for the development of ADAS is presented by \citeauthor*{wagner2014developing} \cite{wagner2014developing}. 


%\paragraph{Embedded SOA}
%\begin{itemize}
%\item \cite {scholz2009soa}: \citeauthor*{scholz2009soa} - âˆˆ SOA-Service Oriented Architectures adapted for embedded networks
%\item \cite{wagner2014developing}: \citeauthor*{wagner2014developing} - Developing self-adaptive automotive systems - On the integration of service-orientation into automotivedevelopment processes -- SOMA4DDAS
%\end{itemize}

Most of these architectural approaches stay in the local domain and do not consider cloud connectivity. A common method to bridge the gap between local computing clusters and remote data centers is to employ middlewares.
\citeauthor*{farahzadi2017middleware} analyze the problem domain of cloud connectivity for the IoT (``Cloud of Things'')\cite{farahzadi2017middleware}. For this purpose, they present a survey in which they analyze a number of different IoT middleware solutions and compile a set of key challenges and requirements for such systems. They furthermore introduce a taxonomy to group types of middlewares and map each of the 20 investigated middlewares to one of the groups. 
Particularly interesting are middlewares that, similar to this thesis' approach, focus on publish-subscribe-style communication.
For instance, \citeauthor*{antonic2016mobile} present COPUS~\cite{antonic2016mobile}, a cloud-based publish-subscribe middleware for the IoT. In the paper, the authors perform benchmarks to evaluate the middleware with respect to scalability and elasticity and present a case study in which test subjects were equipped with mobile air quality monitoring sensors that would continuously send sensor data to the cloud. COPUS relies on a broker as cloud gateway which must be installed on a mobile device (\eg\ a smartphone). Thus, this solution is unsuitable for the automotive domain.
Further noteworthy publish-subscribe middlewares for the IoT are HoPP \cite{gundougan2018hopp} and VIRTUS \cite{bazzani2012enabling}.

Publish-subscribe enables anonymous point-to-multipoint communication which
\linebreak
brings universal benefits, such as scalability and extensibility, which are also interesting for the automotive domain.
Thus, several projects exist that aim to implement publish-subscribe in vehicular E/E architectures.
An example for this is the RACE project \cite{sommer2013race}, an effort to create a holistic platform for next generation cars.
An industry-driven project with the same goal is the AUTOSAR Adaptive Platform \cite{furst2016autosar}.
Noteworthy in this regard is also SOME/IP \cite{volker2013some}, an IP-based automotive middleware by which vehicular functions can be modeled in a service-oriented fashion. SOME/IP integrates flawlessly into AUTOSAR and supports publish-subscribe and other communication paradigms.

The exemplary implementation presented in this thesis relies on the DDS middleware for data exchange. Unfortunately, at the time of this writing, only few attempts were made that aim to leverage DDS in the context of vehicles (\eg\ \cite{bouhouch2013dds, bouhouch2011implementation}). However, some work was done that is concerned with the use of DDS in other safety-critical systems. \citeauthor*{perez2017handling}, for instance, explore DDS for ARINC-653-based avionic systems~\cite{perez2017handling}.
The same authors furthermore present a way to combine DDS and hypervisor-based inter-process communication to interconnect a time and space partitioned system \cite{perez:gutierrez:ieeetpds16}. Their focus lies on mixed-criticality applications running atop a hypervisor designed for safety-critical scenarios. The performance tests they conduct show that DDS adds a reasonable overhead to the communication performance but the overhead caused by hypervisor-based partitioning is quite significant, albeit reducible by the use of multicore processors.
Significant contributions in this field were also made by \citeauthor*{serrano2013virtualizing}, who investigate the performance impact of virtualization on DDS-based applications~(\cite{serrano2013virtualizing, garcia2013benchmarking}).

DDS in combination with overlay networks is another highly relevant topic for this thesis. Only one contribution was found that investigates this opportunity:
\citeauthor*{hakiri2015publish} devise a system to interconnect IoT devices via DDS over overlay networks \cite{hakiri2015publish}. However, the description of their approach lacks details and no real effort were made to evaluate it.
Another relevant work related to overlay networking is presented by \citeauthor*{kratzke2017microservices}. In his paper \cite{kratzke2017microservices}, the author investigates the performance impact of using encrypted overlay networks (in particular, \wnet ) for Linux containers on top of hypervisors. This setup---containers atop hypervisors---is very common in cloud scenarios as IaaS providers often provision servers in the form of virtual machines. This is also the case for the test setup described in this thesis. The author concludes that containers add a non-negligible impact on networking performance. In \wnet -based overlay networks, the performance is further impaired, and another, less-significant impact is observed when employing encryption. This is in contrast to the benchmark results presented in this thesis, which suggest that both technologies incur a very minor overhead.

\paragraph{}
This thesis' approach relies on containerization as means to encapsulate functionality in isolated, portable units. A challenge in this is to marry containerization with the traditionally resource-constrained embedded systems. In recent years, this prospect has received substantial attention in the research community. For instance, \citeauthor*{morabito2017virtualization} provides an in-depth analysis on the utilization of container technology for a variety of Single-Board Computers \cite{morabito2017virtualization}. The author's evaluation includes benchmarks that assess energy consumption, device temperatures, as well as I/O and computing performance and other factors.
Further analyses and benchmarks are presented in \cite{pahl2015containers} and \cite{bellavista2017feasibility}.  
The evaluations reach a consensus that containerization for resource-constrained devices presents a promising prospect. 
In fact, the industry has already caught on.
resin.io\footnote{\url{www.resin.io}} is a project dedicated to bringing containers to embedded devices. In the past, resin.io have made several significant contributions to enable container-based Continous Integration for embedded systems, and have also taken initiative to further minimize resource requirements of containerization. To this end, resin.io provide their own light-weight container engine called ``balena''\footnote{\url{www.balena.io}} and an accompanying host OS that is deliberately crafted to run containers (``resinOS''\footnote{\url{www.resinos.io}}).


%\paragraph{computation offloading in cloud (cell phones)}
%\citeauthor*{barbera2013offload} \cite{barbera2013offload} analyze in which cases it is sensible to offload computations from cell phones to the cloud. There is a tradeoff to be made between the energy savings achieved by the offloading itself and the increased computational overhead of sending data over a mobile network. They aim to provide virtual replicas of the hardware in the cloud, running at all times alongside the physical device to support it whenever there is a need. They do not consider statelessness of the replicas and employ a synchronization mechanism to keep the state consistent. This incurs additional overhead. They use cell phone specific tools which are inapplicable in the automotive use case. They view their approach as holistic solution -> lack of flexibility

%In \cite{chun2011clonecloud} \citeauthor*{barbera2013offload} present \emph{Clone Cloud}, a system to offload workload from mobile applications to the cloud. They employ a combination of static analysis and dynamic profiling to automatically partition mobile applications. repartitioning is thread-wise. They achieve a 20-fold execution speed-up and 20-fold decrease of energy consumption.

\paragraph{}
Finally, after having covered related work concerning the basic building blocks of this thesis' approach (architecture, communication and virtualization), there are some pieces of related work that use similar methods (combining the aforementioned concepts) to achieve similar goals.

One example is presented by \citeauthor*{berger2017containerized}. In their paper \cite{berger2017containerized}, the authors describe their experiences of employing containerization in the context of self-driving vehicles.
In accordance with the microservice architecture pattern, vehicular functionality in their approach is split into a number of fine-grained services deployed on distributed nodes within the vehicle. The services are connected via OpenDaVINCI, a real-time-capable middleware for distributed embedded systems. This approach is very similar to the one proposed in this thesis in that communication is based on multicast-enabled publish-subscribe and that they employ \docker\ containers. However, their approach lacks cloud connectivity. The authors furthermore struggle to get multicast to work over Docker overlay networks---a problem that was solved in this thesis.
%The interplay of their services is based on a \emph{pipes-and-filters} methodology.
%Multi platform images are achieved through different base layers employing different compilers. Disadvantage: containers cannot be moved freely between nodes of different hardware architectures.
%questionable design decisions: Centralized configuration protocol... but decentralization is key
%Suggest to have private registry within the vehicle.
%To provide a high degree of tracability, they present a versioning system that allows versioning of individual image layers which seamlessly integrates into their development workflow.
%Similarly, \citeauthor*{schneider2016achieving} \cite{schneider2016achieving} use containerization in a microservice environment for vehicular functionality. However, the authors only focus on the backend part, \ie , services provisioned in data centers that vehicles may connect to. Their approach does not consider the use of microservices \emph{within} the vehicle. In addition, their methodology is described in rather vague terms and lacks detail.

Another approach that resembles the one presented in this thesis is described by Asad \citeauthor*{javed2016container}. In his master's thesis \cite{javed2016container}, he explores the possibility of managing IoT nodes via \docker\ containers and the Kubernetes\footnote{\url{www.kubernetes.io}} container orchestration platform. The employed experimental setup is very similar to the one used in this thesis in that a local cluster of Raspberry Pis is connected in a LAN with cloud access. Attached to some of the Raspberry Pis are cameras that capture images which are then sent to the cloud via Apache Kafka. Like in this thesis, communication between the nodes and the cloud is publish-subscribe-based. However, the approach has a serious drawback: Kubernetes and Kafka are technologies designed for sophisticated cloud environments and are by no means suitable for the use within embedded computer networks due to their tremendously high system requirements. Moreover, no serious effort is evident to evaluate the approach in a neutral manner.

\citeauthor*{grossmann2016hypriot} describe another approach \cite{grossmann2016hypriot} related to the previous one. But instead of heavy-weight enterprise container management solutions they follow a more light-weight philosophy. A drawback of their approach is a lack of failure resiliency inherent to their centralized architecture in which a master node may become a single point of failure. A follow-up to that work is presented by \citeauthor*{celesti2017watchdog} in which several weak points are addressed \cite{celesti2017watchdog}.

%The fact that ubiquitous publish-subscribe is not only a research matter but is also the basis of multiple commercial industry products is proof for its value. 
Not only in the research community, but also in the industry, there is interest in ubiquitous publish-subscribe. 
For instance, PubNub\footnote{\url{www.pubnub.com}} is a commercial service that aims to provide publish-subscribe-style communication for large numbers of devices dispersed on a global scale. Their focus lies on IoT devices and mobile phone applications. Thus, there is a pronounced focus on handling mobility challenges such as frequently changing IP addresses and general reliability issues. PubNub is a holistic, all-in-one solution, \ie , their service includes everything from client APIs to infrastructure provisioning. The fact that \mbox{PubNub} is a closed platform severely inhibits its adaptability and limits its applicability---especially for the automotive use case, which is characterized by highly specific requirements. While it may be true that PubNub is a good starting point to kick off new businesses (as advertised), it is doubtful that it is the right tool for the intended use case.

Another commercial product that follows the same goal, but is focused more on Industrial IoT (IIoT), is offered by ADLINK (formerly PrismTech). ADLINK provides a holistic data sharing platform based on DDS named ``Vortex DDS''. Aside from their own DDS implementation, OpenSplice, the Vortex platform includes the service called ``Vortex Cloud''.\footnote{\url{www.prismtech.com/vortex/vortex-cloud}} Like this thesis' approach, Vortex Cloud aims to connect globally dispersed DDS components, and also provides means to deploy DDS-based applications in the cloud. Unfortunately, no information about the inner workings of Vortex Cloud and its aptitude can be found online. As it is a commercial, closed-source product, this option was not further pursued.

Real-Time Innovations (RTI) is another company which provides an DDS implementation called ``RTI Connext DDS''.\footnote{\url{www.rti.com/products}} A salient feature of Connext is that it supports DDS-based data transmission over WANs natively. However, this ``RTI Secure WAN Transport'' has several drawbacks. Firstly, it needs to be configured on code-level in all applications that participate in the communication network. This is in contrast to this thesis' approach in which the applications themselves are kept unaware of the fact that they are communicating with peers outside their LAN. This agnostic approach promotes loose coupling, simplifies network management, and ultimately enables applications to migrate freely between computing nodes. Further disadvantages of RTI's approach are that it doesn't support multicast, that it requires a central ``rendezvous'' server which acts as a participant repository, and that it is not resilient to connection loss.\footnote{\url{community.rti.com/static/documentation/connext-dds/5.3.0/doc/manuals/connext_dds/html_files/RTI_ConnextDDS_CoreLibraries_UsersManual/index.htm}}

%For this, a central, publicly accessible ``Cloud Discovery Service'' is required which acts as a repository that holds all participating applications' locations.


